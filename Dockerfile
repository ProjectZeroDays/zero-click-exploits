# Install libtk8.6 and Other Dependencies
RUN apt-get update && apt-get install -y libtk8.6 libnss3 libxss1 libasound2 libx11-xcb1 libxcomposite1 libxcursor1 libxdamage1 libxi6 libxtst6 libappindicator1 libxrandr2 libatk1.0-0 libatk-bridge2.0-0 libgtk-3-0 libgbm1 libpango1.0-0 libxkbcommon0 libxshmfence1 libx11-6 libxcb1 libxext6 libxfixes3 libxrender1

# Set Environment Variables For Hugging Face Code Spaces
ENV HF_API_TOKEN=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
ENV HF_PROJECT_NAME=AI-Driven-Zero-Click-Exploit-Deployment-Framework-C2

# Install Python Dependencies
COPY requirements.txt .
RUN pip install -r requirements.txt

# Copy The Source Files
COPY src ./src
COPY config ./config
COPY data ./data

CMD ["python", "src/main.py"]

# Copy the Application Code
COPY . /app

# Set The Working Directory
WORKDIR /app

# Run The Application
CMD ["python3", "src/gui.py"]

# Automated Deployment and Scaling
RUN apt-get update && apt-get install -y docker.io
COPY infra/k8s/deployment.yaml /app/infra/k8s/deployment.yaml
COPY infra/test_deployment.sh /app/infra/test_deployment.sh
RUN chmod +x /app/infra/test_deployment.sh
CMD ["/app/infra/test_deployment.sh"]
